{"is_source_file": true, "format": "JavaScript", "description": "This file is a JavaScript module implementing a client for backend REST API endpoints in a healthcare AI front-end application. It contains functions to normalize URLs, perform API calls for patient data and chat messaging, handle errors, and export these functionalities for use in other parts of the application.", "external_files": ["fetch", "process.env"], "external_methods": ["fetch"], "published": ["fetchPatients", "fetchPatientHistory", "createOrUpdatePatient", "sendChatMessage"], "classes": [], "methods": [{"name": "normalizeBaseUrl(url)", "description": "Normalizes the backend base URL from environment variables, handling trailing slashes and '/api' suffixes.", "scope": "", "scopeKind": ""}, {"name": "tryParseJson(res)", "description": "Attempts to parse a fetch response as JSON, returns null if parsing fails.", "scope": "", "scopeKind": ""}, {"name": "buildHttpError(res, defaultMsg)", "description": "Constructs an Error object with a detailed message extracted from a fetch Response, including fallback to text snippets.", "scope": "", "scopeKind": ""}, {"name": "fetchPatients()", "description": "Fetches a list of patients with recent chat summaries from the backend.", "scope": "", "scopeKind": ""}, {"name": "fetchPatientHistory(patientId)", "description": "Fetches chat history for a specific patient identified by patientId.", "scope": "", "scopeKind": ""}, {"name": "createOrUpdatePatient(patient)", "description": "Creates or updates a patient record by sending only defined patient fields to the backend.", "scope": "", "scopeKind": ""}, {"name": "sendChatMessage({ patientId, message })", "description": "Sends a chat message for a patient and returns responses from agents.", "scope": "", "scopeKind": ""}], "calls": ["fetch", "buildHttpError", "tryParseJson"], "search-terms": ["api.js", "healthcare AI", "fetchPatients", "Patient", "chat", "REST API client", "error handling", "normalize URL"], "state": 2, "file_id": 13, "knowledge_revision": 38, "git_revision": "b6db93b70579668b33200dceb97927113d580bcf", "revision_history": [{"27": ""}, {"32": "b43fcfd7f64f8404110d57553e942169a03e1b81"}, {"38": "b6db93b70579668b33200dceb97927113d580bcf"}], "ctags": [{"_type": "tag", "name": "buildHttpError", "path": "/home/kavia/workspace/code-generation/healthcare-ai-assistant-3214-3223/chat_frontend/src/services/api.js", "pattern": "/^async function buildHttpError(res, defaultMsg) {$/", "language": "JavaScript", "kind": "function", "signature": "(res, defaultMsg)"}, {"_type": "tag", "name": "createOrUpdatePatient", "path": "/home/kavia/workspace/code-generation/healthcare-ai-assistant-3214-3223/chat_frontend/src/services/api.js", "pattern": "/^export async function createOrUpdatePatient(patient) {$/", "language": "JavaScript", "kind": "function", "signature": "(patient)"}, {"_type": "tag", "name": "fetchPatientHistory", "path": "/home/kavia/workspace/code-generation/healthcare-ai-assistant-3214-3223/chat_frontend/src/services/api.js", "pattern": "/^export async function fetchPatientHistory(patientId) {$/", "language": "JavaScript", "kind": "function", "signature": "(patientId)"}, {"_type": "tag", "name": "fetchPatients", "path": "/home/kavia/workspace/code-generation/healthcare-ai-assistant-3214-3223/chat_frontend/src/services/api.js", "pattern": "/^export async function fetchPatients() {$/", "language": "JavaScript", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "normalizeBaseUrl", "path": "/home/kavia/workspace/code-generation/healthcare-ai-assistant-3214-3223/chat_frontend/src/services/api.js", "pattern": "/^function normalizeBaseUrl(url) {$/", "language": "JavaScript", "kind": "function", "signature": "(url)"}, {"_type": "tag", "name": "sendChatMessage", "path": "/home/kavia/workspace/code-generation/healthcare-ai-assistant-3214-3223/chat_frontend/src/services/api.js", "pattern": "/^export async function sendChatMessage({ patientId, message }) {$/", "language": "JavaScript", "kind": "function", "signature": "({ patientId, message })"}, {"_type": "tag", "name": "tryParseJson", "path": "/home/kavia/workspace/code-generation/healthcare-ai-assistant-3214-3223/chat_frontend/src/services/api.js", "pattern": "/^async function tryParseJson(res) {$/", "language": "JavaScript", "kind": "function", "signature": "(res)"}], "hash": "a31dbe8a9467b4de036cc6ed139f36c4", "format-version": 4, "code-base-name": "chat_frontend", "filename": "chat_frontend/src/services/api.js"}